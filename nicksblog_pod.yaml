apiVersion: v1
kind: Pod

metadata:
  name: nicksblog-pod
  labels:
    app: nicksblog

spec:
  containers:
    - name: nicksblog-container
      image: nicksegal/devops-nicksblog:latest
      ports: 
        - name: gunicorn
          containerPort: 8000
          protocol: TCP
      env:
        - name: BLOGPASSWORD
          valueFrom:
            secretKeyRef:
              name: blogpassword
              key: BLOGPASSWORD
        - name: DJANGOKEY
          valueFrom:
            secretKeyRef:
              name: djangokey
              key: DJANGOKEY
        - name: AWS_ACCESS_KEY_ID
          valueFrom:
            secretKeyRef:
              name: aws-access-key-id
              key: AWS_ACCESS_KEY_ID
        - name: AWS_SECRET_ACCESS_KEY
          valueFrom:
            secretKeyRef:
              name: aws-secret-access-key
              key: AWS_SECRET_ACCESS_KEY